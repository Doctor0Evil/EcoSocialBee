{
  "$schema": "https://aln.ecosocialbee.org/schema/v1",
  "shard_id": "qpudatashards/particles/HiveEcoEnvelope2026v1.aln",
  "title": "HiveEcoEnvelope2026v1",
  "description": "Safe bands for hive temperature, toxins, forage diversity, mapped to EcoImpactScoreForHiveCorridor.",
  "version": "1.0.0",
  "kind": "HiveEcoEnvelope",
  "fields": {
    "hive_id": { "type": "string" },
    "safe_temperature_c_min": { "type": "number" },
    "safe_temperature_c_max": { "type": "number" },
    "safe_toxin_ppb_max": { "type": "number" },
    "safe_forage_diversity_index_min": { "type": "number", "min": 0, "max": 1 },
    "safe_forage_radius_m_min": { "type": "number", "min": 0 },
    "eco_band": { "type": "string", "enum": ["SAFE", "WARNING", "CRITICAL"] },
    "eco_impact_score_corridor_min": { "type": "number" },
    "eco_impact_score_corridor_max": { "type": "number" }
  },
  "aln_particle": "aln particle hive.metrics.envelope.v1\n  field hive_id string\n  field region string\n  -- Bee-centric metrics\n  field hive_temperature_c f64\n  field brood_temperature_c f64\n  field hive_humidity_pct f64\n  field nectar_kg f64\n  field pollen_kg f64\n  field forager_load_pct f64\n  field toxin_index_air f64\n  field toxin_index_wax f64\n  field forage_radius_km f64\n  field eco_band string -- \"safe\" | \"warning\" | \"critical\"\n\n  -- Triad scores\n  field knowledgefactor01 f64\n  field ecoimpact01 f64\n  field riskofharm01 f64\n\n  -- Residual and risk coordinates\n  field vt_residual f64\n  field r_temp01 f64\n  field r_toxin_air01 f64\n  field r_toxin_wax01 f64\n  field r_forage01 f64\nend\n\naln contract invariant.hive_corridor_ok(m hive.metrics.envelope.v1)\n  bool\n    m.r_temp01      <= 1.0 &&\n    m.r_toxin_air01 <= 1.0 &&\n    m.r_toxin_wax01 <= 1.0 &&\n    m.r_forage01    <= 1.0\nend\n\naln contract invariant.hive_residual_nonincreasing(vt f64, vtp1 f64)\n  bool vtp1 <= vt\nend\n",
  "invariants": {
    "temperature_band_consistent": "safe_temperature_c_min < safe_temperature_c_max",
    "forage_radius_positive": "safe_forage_radius_m_min >= 0",
    "eco_corridor_monotone": "eco_impact_score_corridor_min <= eco_impact_score_corridor_max"
  }
}
